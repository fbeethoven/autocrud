/* This code is autogenerated by Autocrud {{ .Version }} */

package controller

import (
    "github.com/gin-contrib/cors"
    "github.com/gin-gonic/gin"

    _ "{{ .ProjectName }}/src/models"
    _ "{{ .ProjectName }}/src/dao"
)

type ResourceController interface {
    RegisterResource(*Controller)
}

type Controller struct {
    Router    *gin.Engine
    Resources []ResourceController
}

func NewController() *Controller {
    router := gin.Default()
    router.Use(cors.Default())

    return &Controller{
        Router:    router,
        Resources: make([]ResourceController, 0),
    }
}

func (c *Controller) Run(addr string, resources ...ResourceController) {
    for _, controller := range resources {
        controller.RegisterResource(c)
    }
        c.Router.Run(addr)
}
